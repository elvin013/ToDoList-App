<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="UTF-8">
  <title>{{pageTitle}}-ToDoList App</title>
  <link rel="stylesheet" href="/assets/css/{{#if logOut}}login{{else}}layout-style{{/if}}.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css">
  <!-- Boxicons CDN Link -->
  <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Fontawesome CDN Link -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>


{{#if logOut}}

<body class="body">

  <section>

    {{#if hasErrorMessages}}

    <div class="alert alert-danger alert-dismissible fade show" role="alert">
      <ul>
        {{#each errorMessages}}
        <li>{{this}}</li>
        {{/each}}
      </ul>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    {{/if}}

    {{{body}}}

  </section>
  {{else}}

  <body>
    <div class="sidebar">
      <div class="logo-details" id="btn-menu">
        <i class='bx bx-notepad icon'></i>
        <div class="logo_name">To Do List</div>
        <i class='bx bx-menu' id="btn"></i>
      </div>

      <li>
        <i class='bx bx-search'></i>
        <input type="text" placeholder="Search...">
        <span class="custom-tooltip">Search</span>
      </li>
      <li>
        <a href="/home" class="{{#if homeActive}}bg-light{{/if}}" id="btn-home">
          <i class='bx bx-home-alt {{#if homeActive}}text-dark{{/if}}'></i>
          <span class="links_name {{#if homeActive}}text-dark{{/if}}">Tasks</span>
        </a>
        <span class="custom-tooltip">Tasks</span>
      </li>
      <li>
        <a href="/completed-tasks" class="{{#if completedActive}}bg-light{{/if}}" id="btn-completed-tasks">
          <i class='bx bx-check-square {{#if completedActive}}text-dark{{/if}}'></i>
          <span class="links_name {{#if completedActive}}text-dark{{/if}}">Completed</span>
        </a>
        <span class="custom-tooltip">Completed</span>
      </li>
      <li>
        <a href="/pending-tasks" class="{{#if pendingActive}}bg-light{{/if}}" id="btn-pending-tasks">
          <i class='bx bx-time-five {{#if pendingActive}}text-dark{{/if}}'></i>
          <span class="links_name {{#if pendingActive}}text-dark{{/if}}">Pending</span>
        </a>
        <span class="custom-tooltip">Pending</span>
      </li>
      {{#if isAuthenticated}}
      <li>
        <a href="/user-information" class="{{#if userActive}}bg-light{{/if}}" id="btn-user-information">
          <i class='bx bx-user {{#if userActive}}text-dark{{/if}}'></i>
          <span class="links_name {{#if userActive}}text-dark{{/if}}">User</span>
        </a>
        <span class="custom-tooltip">User</span>
      </li>
      <li class="profile">
        <div class="profile-details">
          <img src="/images/profile.jpg" alt="profileImg">
          <div class="name_job">
            <div class="name"><small>{{user.fullName}}</small></div>
            <div class="job">@{{user.username}}</div>
          </div>
        </div>
        <a href="/logout"><i class='bx bx-log-out' id="log_out"></i></a>
      </li>
      {{/if}}

    </div>


    <section class="home-section">

      {{#if hasErrorMessages}}

      <div class="col-md-4 position-fixed end-0 mt-3 me-2" style="max-width: 25%;">
        <div class="alert align-items-center text-bg-danger border-0" role="alert" aria-live="assertive"
          aria-atomic="true">
          <div class="d-flex">
            <div class="alert-body">

              {{#each errorMessages}}
              <p><i class='bx bxs-error-circle'></i> {{this}}</p>
              {{/each}}
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="alert"
              aria-label="Close"></button>
          </div>
        </div>
      </div>

      {{/if}}

      {{#if isAuthenticated}}

      {{{body}}}



    </section>
    {{else}}
    <title>ToDoList App</title>
    <section class="text-center container">
      <div class="row">
        <div class="col-lg-6 col-md-8 mx-auto">
          <h1 class="fw-bold mt-4 text-white"><i class='bx bx-notepad icon'></i> To Do List</h1>
          <p class="fs-3 fw-bold text-secondary mt-1 text-center">Welcome to your To Do List, log in and start
            interacting
            with your tasks.</p>
          <p>
            <a href="/" class="btn btn-lg px-2 btn-primary mt-1"><i class='bx bx-log-in'></i> Sing in</a>
          </p>
        </div>
    </section>
    </section>
    {{/if}}

    {{/if}}

    <script src="/assets/js/layoutScript.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  </body>

</html>